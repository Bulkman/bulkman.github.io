<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="./styles/styles.css">

    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"></script>

    <title>Document</title>
</head>
<body>

<div class="o_search">
    <main class="n_main">
        <section class="n_search">

            <form action="" class="n_form">

                <section class="search__form_1">

                    <div class="select-container">

                        <svg class="n_icon" width="14" height="20" viewBox="0 0 14 20" fill="none"
                             xmlns="http://www.w3.org/2000/svg">
                            <path d="M7 0C3.13 0 0 3.13 0 7C0 11.2076 4.49633 17.0211 6.28176 19.1637C6.66099 19.6188 7.339 19.6188 7.71824 19.1637C9.50367 17.0211 14 11.2076 14 7C14 3.13 10.87 0 7 0ZM7 9.5C5.62 9.5 4.5 8.38 4.5 7C4.5 5.62 5.62 4.5 7 4.5C8.38 4.5 9.5 5.62 9.5 7C9.5 8.38 8.38 9.5 7 9.5Z"
                                  fill="black" fill-opacity="0.54"/>
                        </svg>

                        <input id="district-selector" class="search__select" autocomplete="off">
                        <div id="district-selector-container" class="selector-container" style="display: none; z-index: 2">

                        </div>
                    </div>

                    <div class="select-container">

                        <svg class="n_icon" width="14" height="20" viewBox="0 0 14 20" fill="none"
                             xmlns="http://www.w3.org/2000/svg">
                            <path d="M7 0C3.13 0 0 3.13 0 7C0 11.2076 4.49633 17.0211 6.28176 19.1637C6.66099 19.6188 7.339 19.6188 7.71824 19.1637C9.50367 17.0211 14 11.2076 14 7C14 3.13 10.87 0 7 0ZM7 9.5C5.62 9.5 4.5 8.38 4.5 7C4.5 5.62 5.62 4.5 7 4.5C8.38 4.5 9.5 5.62 9.5 7C9.5 8.38 8.38 9.5 7 9.5Z"
                                  fill="black" fill-opacity="0.54"/>
                        </svg>

                        <input id="city-selector" class="search__select" autocomplete="off">
                        <div id="city-selector-container" class="selector-container" style="display: none;">

                        </div>
                    </div>

                    <div class="select-container">

                        <svg class="n_icon" width="20" height="16" viewBox="0 0 20 16" fill="none"
                             xmlns="http://www.w3.org/2000/svg">
                            <path d="M0.999997 15.0783C0.447712 15.0783 -3.14744e-06 14.6306 -3.14744e-06 14.0783V1.91993C-3.14744e-06 1.36765 0.447712 0.91993 0.999997 0.91993H2.93525C3.28841 0.91993 3.61537 1.1062 3.79546 1.40999L7.42574 7.53379C7.58416 7.81102 7.76237 8.15425 7.96039 8.56349C7.99026 8.62323 8.05617 8.78767 8.13712 8.98336C8.36386 9.53148 8.59759 9.43628 8.55309 8.84479C8.5144 8.3304 8.49505 7.89339 8.49505 7.53379V1.91993C8.49505 1.36765 8.94276 0.91993 9.49505 0.91993H10.9604C11.5127 0.91993 11.9604 1.36765 11.9604 1.91993V14.0783C11.9604 14.6306 11.5127 15.0783 10.9604 15.0783H9.0426C8.69071 15.0783 8.36472 14.8934 8.1842 14.5913L4.53465 8.48429C4.37624 8.20706 4.19802 7.87043 4 7.47439C3.84931 7.16296 3.41803 7.2853 3.43778 7.6307C3.45616 7.95198 3.46534 8.2365 3.46534 8.48429V14.0783C3.46534 14.6306 3.01763 15.0783 2.46534 15.0783H0.999997ZM13.2475 6.04864C13.2475 5.13775 13.571 4.35887 14.2178 3.71201C14.8647 3.06515 15.67 2.74171 16.6337 2.74171C17.571 2.74171 18.363 3.06515 19.0099 3.71201C19.67 4.35887 20 5.13775 20 6.04864C20 6.97274 19.6766 7.75161 19.0297 8.38528C18.3828 9.01894 17.5842 9.33577 16.6337 9.33577C15.67 9.33577 14.8647 9.01894 14.2178 8.38528C13.571 7.75161 13.2475 6.97274 13.2475 6.04864ZM15.6634 6.02884C15.6634 6.31927 15.7492 6.56349 15.9208 6.76151C16.1056 6.94633 16.3432 7.03874 16.6337 7.03874C16.9241 7.03874 17.1551 6.94633 17.3267 6.76151C17.5115 6.56349 17.604 6.31927 17.604 6.02884C17.604 5.75161 17.5115 5.52059 17.3267 5.33577C17.1419 5.13775 16.9109 5.03874 16.6337 5.03874C16.3564 5.03874 16.1254 5.13775 15.9406 5.33577C15.7558 5.52059 15.6634 5.75161 15.6634 6.02884ZM14.4257 12.4645C13.8735 12.4645 13.4257 12.0168 13.4257 11.4645V11.1873C13.4257 10.635 13.8735 10.1873 14.4257 10.1873H18.7426C19.2949 10.1873 19.7426 10.635 19.7426 11.1873V11.4645C19.7426 12.0168 19.2949 12.4645 18.7426 12.4645H14.4257Z"
                                  fill="black" fill-opacity="0.54"/>
                        </svg>

                        <input id="warehouse-selector" class="search__select" autocomplete="off">
                        <div id="warehouse-selector-container" class="selector-container" style="display: none;">

                        </div>
                    </div>

                    <div class="buttons">
                        <a id="find-warehouse-btn" class="n_button" href="#">
                            Шукати
                        </a>

                        <a class="n_button" href="#">
                            Показати на мапі
                        </a>
                    </div>
                </section>

                <div class="expanded-search">
                    <section class="expanded-search__buttons">
                        <div data-toggle="collapse" data-target="#collapse-content" aria-expanded="false"
                             aria-controls="collapse-content">
                            <span id="collapsable-section-title" class="activate">Розширений пошук</span>
                            <div class="btn">
                                <label class="switch">
                                    <input id="collapsable-section-shevron" class="toggle" type="checkbox">
                                    <span class="slider"></span>
                                </label>
                            </div>
                        </div>

                        <div id="clear-btn">
                            <span>Очистити все</span>
                            <svg width="10" height="10" viewBox="0 0 10 10" fill="none"
                                 xmlns="http://www.w3.org/2000/svg">
                                <path d="M9.72125 1.33625C10.0133 1.04423 10.0133 0.57077 9.72125 0.27875C9.42923 -0.0132705 8.95577 -0.0132706 8.66375 0.27875L5 3.9425L1.33625 0.27875C1.04423 -0.013271 0.57077 -0.0132705 0.27875 0.27875C-0.0132705 0.57077 -0.0132706 1.04423 0.27875 1.33625L3.9425 5L0.27875 8.66375C-0.013271 8.95577 -0.0132705 9.42923 0.27875 9.72125C0.57077 10.0133 1.04423 10.0133 1.33625 9.72125L5 6.0575L8.66375 9.72125C8.95577 10.0133 9.42923 10.0133 9.72125 9.72125C10.0133 9.42923 10.0133 8.95577 9.72125 8.66375L6.0575 5L9.72125 1.33625Z"
                                      fill="black" fill-opacity="0.54"/>
                            </svg>
                        </div>
                    </section>

                    <div class="collapse" id="collapse-content">
                        <div class="search__form_2">
                            <span class="text">Показати тільки:</span>

                            <div class="select-container select">

                                <select id="warehouse-type-selector" class="search__select .select_280">
                                    <option value="" selected>Всі типи відділень</option>
                                    <option value="Branch">Відділення</option>
                                    <option value="Postomat">Поштомати</option>
                                    <option value="Office">Пункт «Нова Пошта»</option>
                                </select>
                            </div>


                            <input class="n_checkbox" type="checkbox" id="is-work-on-sunday" name="workInSunday"
                                   value="">
                            <label for="is-work-on-sunday" class="n_label">Працює в неділю</label>

                            <input class="n_checkbox" type="checkbox" id="is-self-serve" name="self" value="">
                            <label for="is-self-serve" class="n_label">Самообслуговування</label>

                        </div>
                    </div>

                </div>
            </form>
        </section>
    </main>
</div>

<section class="table">
    <section class="table__container" id="table__container">
        <section class="table__head">
            <span class="table__text first-line">Відділення/<br>Почтомат</span>
        </section>

        <section class="table__head">
            <span class="table__text">Адреса</span>
        </section>

        <section class="table__head d-none d-md-block d-lg-block d-xl-block">
            <span class="table__text">Графік роботи</span>
        </section>

        <section class="table__head d-none d-md-block d-lg-block d-xl-block">
            <span class="table__text">Вага до</span>
        </section>
    </section>
</section>

</body>
<script type="text/javascript">
    $(function () {
        // Init section
        var $findWarehouseBtn = $('#find-warehouse-btn');

        var $districtSelect = $('#district-selector');
        var $districtSelectorContainer = $('#district-selector-container');
        var $citySelect = $('#city-selector');
        var $citySelectorContainer = $('#city-selector-container');
        var $warehouseSelect = $('#warehouse-selector');
        var $warehouseSelectorContainer = $('#warehouse-selector-container');

        var $warehouseTypeSelect = $('#warehouse-type-selector');
        var $isWorkingOnSundayCheckbox = $('#is-work-on-sunday');
        var $isSelfServingCheckbox = $('#is-self-serve');
        var $clearBtn = $('#clear-btn');
        var $warehouseTable = $('#table__container');

        var districts = [
            {
                Ref: 'dcaad3d6-4b33-11e4-ab6d-005056801329',
                Description: 'АРК',
                DescriptionRu: 'АРК'
            },
            {
                Ref: 'dcaad5a7-4b33-11e4-ab6d-005056801329',
                Description: 'Вінницька',
                DescriptionRu: 'Винницкая'
            },
            {
                Ref: 'dcaad676-4b33-11e4-ab6d-005056801329',
                Description: 'Волинська',
                DescriptionRu: 'Волынская'
            },
            {
                Ref: 'dcaad735-4b33-11e4-ab6d-005056801329',
                Description: 'Дніпропетровська',
                DescriptionRu: 'Днепропетровская'
            },
            {
                Ref: 'dcaad81c-4b33-11e4-ab6d-005056801329',
                Description: 'Донецька',
                DescriptionRu: 'Донецкая'
            },
            {
                Ref: 'dcaad8fb-4b33-11e4-ab6d-005056801329',
                Description: 'Житомирська',
                DescriptionRu: 'Житомирская'
            },
            {
                Ref: 'dcaad993-4b33-11e4-ab6d-005056801329',
                Description: 'Закарпатська',
                DescriptionRu: 'Закарпатская'
            },
            {
                Ref: 'dcaada26-4b33-11e4-ab6d-005056801329',
                Description: 'Запорізька',
                DescriptionRu: 'Запорожская'
            },
            {
                Ref: 'dcaadac6-4b33-11e4-ab6d-005056801329',
                Description: 'Івано-Франківська',
                DescriptionRu: 'Ивано-Франковская'
            },
            {
                Ref: 'dcaadb64-4b33-11e4-ab6d-005056801329',
                Description: 'Київська',
                DescriptionRu: 'Киевская'
            },
            {
                Ref: 'dcaadbf9-4b33-11e4-ab6d-005056801329',
                Description: 'Кіровоградська',
                DescriptionRu: 'Кировоградская'
            },
            {
                Ref: 'dcaadc91-4b33-11e4-ab6d-005056801329',
                Description: 'Луганська',
                DescriptionRu: 'Луганская'
            },
            {
                Ref: 'dcaadc91-4b33-11e4-ab6d-005056801329',
                Description: 'Львівська',
                DescriptionRu: 'Львовская'
            },
            {
                Ref: 'dcaaddd7-4b33-11e4-ab6d-005056801329',
                Description: 'Миколаївська',
                DescriptionRu: 'Николаевская'
            },
            {
                Ref: 'dcaade6d-4b33-11e4-ab6d-005056801329',
                Description: 'Одеська',
                DescriptionRu: 'Одесская'
            },
            {
                Ref: 'dcaadf02-4b33-11e4-ab6d-005056801329',
                Description: 'Полтавська',
                DescriptionRu: 'Полтавская'
            },
            {
                Ref: 'dcaadfa0-4b33-11e4-ab6d-005056801329',
                Description: 'Рівненська',
                DescriptionRu: 'Ровненская'
            },
            {
                Ref: 'dcaae036-4b33-11e4-ab6d-005056801329',
                Description: 'Сумська',
                DescriptionRu: 'Сумская'
            },
            {
                Ref: 'dcaae303-4b33-11e4-ab6d-005056801329',
                Description: 'Тернопільська',
                DescriptionRu: 'Тернопольская'
            },
            {
                Ref: 'dcaae3a1-4b33-11e4-ab6d-005056801329',
                Description: 'Харківська',
                DescriptionRu: 'Харьковская'
            },
            {
                Ref: 'dcaae44b-4b33-11e4-ab6d-005056801329',
                Description: 'Херсонська',
                DescriptionRu: 'Херсонская'
            },
            {
                Ref: 'dcaae4e5-4b33-11e4-ab6d-005056801329',
                Description: 'Хмельницька',
                DescriptionRu: 'Хмельницкая'
            },
            {
                Ref: 'dcaae57c-4b33-11e4-ab6d-005056801329',
                Description: 'Черкаська',
                DescriptionRu: 'Черкасская'
            },
            {
                Ref: 'dcaae60e-4b33-11e4-ab6d-005056801329',
                Description: 'Чернівецька',
                DescriptionRu: 'Черновицкая'
            },
            {
                Ref: 'dcaae6a8-4b33-11e4-ab6d-005056801329',
                Description: 'Чернігівська',
                DescriptionRu: 'Черниговская'
            }
        ];
        var warehousesList = [];
        var citiesList = [];

        var currentLang = new URLSearchParams(location.href).get('lang') || 'uk';
        var selectedCityRef = '';
        var selectedDistrictRef = '';
        var selectedWarehouseRef = '';

        var typeWarehouse = '9a68df70-0267-42a8-bb5c-37f427e36ee4';
        var typePostmap = 'f9316480-5f2d-425d-bc2c-ac7cd29decf0';
        var typeOffice = '841339c7-591a-42e2-8233-7a0a00f0ed6f';

        var categoryWarehouse = 'Branch';
        var categoryPostmap = 'Postomat';
        var categoryOffice = 'Office';

        function getSettlementAreas() {
            $districtSelectorContainer.empty();
            districts.forEach(function (district) {
                var ukA = $('<a data-value="' + district.Description + '" data-lang="uk" data-ref="' + district.Ref + '">' + district.Description + '</a>');
                var ruA = $('<a data-value="' + district.DescriptionRu + '" data-lang="ru" data-ref="' + district.Ref + '">' + district.DescriptionRu + '</a>');

                if (currentLang === 'uk') {
                    ukA.hide();
                } else {
                    ruA.hide();
                }

                $districtSelectorContainer.append(ukA);
                $districtSelectorContainer.append(ruA);
            });

            $districtSelectorContainer.find('a').off().on('click', function () {
                selectedDistrictRef = this.dataset.ref;
                $districtSelect.val(this.text).change();
            });
        }

        function getSettlements(areaRef, page, limit) {
            $.ajax({
                type: 'POST',
                url: 'https://api.novaposhta.ua/v2.0/json/',
                data: JSON.stringify({
                    apiKey: '',
                    modelName: 'AddressGeneral',
                    calledMethod: 'getSettlements',
                    methodProperties: {
                        AreaRef: areaRef,
                        Warehouse: '1',
                        Page: page,
                        Limit: limit
                    }
                }),
                dataType: 'json',
                success: function (response) {
                    if (response.success) {
                        citiesList = response.data;

                        $citySelectorContainer.empty();
                        response.data.forEach(function (city) {
                            var ukA = $('<a data-value="' + city.Description + '" data-lang="uk" data-ref="' + city.Ref + '">' + city.Description + '</a>');
                            var ruA = $('<a data-value="' + city.DescriptionRu + '" data-lang="ru" data-ref="' + city.Ref + '">' + city.DescriptionRu + '</a>');

                            if (currentLang === 'uk') {
                                ukA.hide();
                            } else {
                                ruA.hide();
                            }

                            $citySelectorContainer.append(ukA);
                            $citySelectorContainer.append(ruA);
                        });

                        $citySelectorContainer.find('a').off().on('click', function () {
                            selectedCityRef = this.dataset.ref;
                            $citySelect.val(this.text).change();
                        });
                    }
                }
            });
        }

        function getWarehouseName(warehouse) {
            if (warehouse.CategoryOfWarehouse === categoryWarehouse) {
                return 'Отделение №' + warehouse.Number;
            } else if (warehouse.CategoryOfWarehouse === categoryPostmap) {
                return 'Почтомат №' + warehouse.Number;
            } else if (warehouse.CategoryOfWarehouse === categoryOffice) {
                return 'Пункт «Нова Пошта» №' + warehouse.Number;
            }

            return 'Отделение №' + warehouse.Number;
        }

        function getWarehouseShortName(warehouse) {
            if (warehouse.CategoryOfWarehouse === categoryWarehouse) {
                return 'Отд №' + warehouse.Number;
            } else if (warehouse.CategoryOfWarehouse === categoryPostmap) {
                return 'П-т №' + warehouse.Number;
            } else if (warehouse.CategoryOfWarehouse === categoryOffice) {
                return 'Пункт «Нова Пошта» №' + warehouse.Number;
            }

            return 'Отд №' + warehouse.Number;
        }

        function getWarehouses(cityRef, page, limit) {
            $.ajax({
                type: 'POST',
                url: 'https://api.novaposhta.ua/v2.0/json/',
                data: JSON.stringify({
                    apiKey: '',
                    modelName: 'AddressGeneral',
                    calledMethod: 'getWarehouses',
                    methodProperties: {
                        SettlementRef: cityRef,
                        Page: page,
                        Limit: limit
                    }
                }),
                dataType: 'json',
                success: function (response) {
                    $warehouseSelectorContainer.empty();

                    if (response.success) {
                        warehousesList = response.data;
                        warehousesList.forEach(function (warehouse) {
                            var ukA = $('<a data-value="' + warehouse.Description + '" data-lang="uk" data-ref="' + warehouse.Ref + '">' + getWarehouseName(warehouse) + '</a>');
                            var ruA = $('<a data-value="' + warehouse.DescriptionRu + '" data-lang="ru" data-ref="' + warehouse.Ref + '">' + getWarehouseName(warehouse) + '</a>');

                            if (currentLang === 'uk') {
                                ukA.hide();
                            } else {
                                ruA.hide();
                            }

                            $warehouseSelectorContainer.append(ukA);
                            $warehouseSelectorContainer.append(ruA);
                        });

                        $warehouseSelectorContainer.find('a').off().on('click', function () {
                            selectedWarehouseRef = this.dataset.ref;
                            $warehouseSelect.val(this.text).change();
                        });
                    }
                }
            });
        }

        function getFilter() {
            // Possible filter
            return {
                warehouseCategory: $warehouseTypeSelect.val(),
                warehouse: selectedWarehouseRef,
                sunday: $isWorkingOnSundayCheckbox.is(':checked'),
                selfService: $isSelfServingCheckbox.is(':checked')
            };
        }

        function getFilteredResult(filter, warehousesList) {
            $warehouseTable.empty();

            $warehouseTable.append(
                '<section class="table__head">\n' +
                '<span class="table__text first-line">Відділення/<br>Почтомат</span>\n' +
                '</section>'
            );

            $warehouseTable.append('' +
                '<section class="table__head">\n' +
                '<span class="table__text">Адреса</span>\n' +
                '</section>');

            $warehouseTable.append('' +
                '<section class="table__head d-none d-md-block d-lg-block d-xl-block">\n' +
                '<span class="table__text">Графік роботи</span>\n' +
                '</section>');

            $warehouseTable.append('' +
                '<section class="table__head d-none d-md-block d-lg-block d-xl-block">\n' +
                '<span class="table__text">Вага до</span>\n' +
                '</section>');

            warehousesList.forEach(function (warehouse) {
                if ((warehouse.Ref === filter.warehouse || filter.warehouse === '') &&
                    (warehouse.CategoryOfWarehouse === filter.warehouseCategory || filter.warehouseCategory === '') &&
                    (+warehouse.SelfServiceWorkplacesCount === (filter.selfService ? 1 : 0))) {
                    $warehouseTable.append('      ' +
                        '<section class="table__body tbody">\n' +
                        '<span class="tbody__text dep line">\n'
                        + getWarehouseShortName(warehouse) +
                        '</span>\n' +
                        '</section>');

                    $warehouseTable.append('      ' +
                        '<section class="table__body tbody">\n' +
                        '<span class="tbody__text">\n'
                        + warehouse.Description.split(':').slice(1).join('') +
                        '</span>\n' +
                        '</section>');

                    $warehouseTable.append('<section class="table__body tbody d-none d-md-block d-lg-block d-xl-block">\n' +
                        '      <span class="tbody__text time">\n' +
                        '        <div class="dropdown">\n' +
                        '   </div><span class="day">Пн: \n' +
                        warehouse.Schedule.Monday +
                        '          </span><button class="btn" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">\n' +
                        '          <label class="switch">\n' +
                        '             <input class="toggle" type="checkbox" id="collapsable-section-shevron-time">\n' +
                        '             <span class="slider"></span>\n' +
                        '           </label>\n' +
                        '         </button>\n' +
                        '       <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">\n' +
                        '          <span>Пн: ' + warehouse.Schedule.Monday + '</span>\n' +
                        '          <span>Вт: ' + warehouse.Schedule.Tuesday + '</span>\n' +
                        '          <span>Ср: ' + warehouse.Schedule.Wednesday + '</span>\n' +
                        '          <span>Чт: ' + warehouse.Schedule.Thursday + '</span>\n' +
                        '          <span>Пт: ' + warehouse.Schedule.Friday + '</span>\n' +
                        '          <span>Сб: ' + warehouse.Schedule.Saturday + '</span>\n' +
                        '          <span>Нд: ' + warehouse.Schedule.Sunday + '</span>\n' +
                        '          <span>Показати на мапі</span>\n' +
                        '      </div>\n' +
                        '      </span>\n' +
                        '        </section>');

                    $warehouseTable.append('<section class="table__body tbody weight d-none d-md-block d-lg-block d-xl-block">\n' +
                        '<span class="tbody__text">' + warehouse.PlaceMaxWeightAllowed + ' кг</span></section>');
                }
            });
        }

        function clearFilterInputs() {
            $districtSelect.val('').change();
            $citySelect.val('').change();
            $warehouseSelect.val('').change();
            $warehouseTypeSelect.val('').change();
            $isWorkingOnSundayCheckbox.prop('checked', false);
            $isSelfServingCheckbox.prop('checked', false);
        }

        $districtSelect.change(function () {
            if ($districtSelect.val() === '') {
                selectedDistrictRef = '';
            }

            getSettlements(selectedDistrictRef, 1, 10000000);
        });

        $citySelect.change(function () {
            if ($citySelect.val() === '') {
                selectedCityRef = '';
            }

            getWarehouses(selectedCityRef, 1, 10000000);
        });

        $warehouseSelect.change(function () {
            if ($warehouseSelect.val() === '') {
                selectedWarehouseRef = '';
            }
        });

        $districtSelect.keyup(function () {
            var filter = $districtSelect.val().toUpperCase();

            for (i = 0; i < districts.length; i++) {
                var district = districts[i];
                var ruName = district.DescriptionRu;
                var ukName = district.Description;

                if (ruName.toUpperCase().indexOf(filter) > -1 || ukName.toUpperCase().indexOf(filter) > -1) {
                    $districtSelectorContainer.find('[data-ref=' + district.Ref + '][data-lang=' + currentLang + ']').show();
                } else {
                    $districtSelectorContainer.find('[data-ref=' + district.Ref + ']').hide();
                }
            }
        });

        $citySelect.keyup(function () {
            var filter = $citySelect.val().toUpperCase();

            for (i = 0; i < citiesList.length; i++) {
                var city = citiesList[i];
                var ruName = city.DescriptionRu;
                var ukName = city.Description;

                if (ruName.toUpperCase().indexOf(filter) > -1 || ukName.toUpperCase().indexOf(filter) > -1) {
                    $citySelectorContainer.find('[data-ref=' + city.Ref + '][data-lang=' + currentLang + ']').show();
                } else {
                    $citySelectorContainer.find('[data-ref=' + city.Ref + ']').hide();
                }
            }
        });

        $warehouseSelect.keyup(function () {
            var filter = $warehouseSelect.val().toUpperCase();

            for (i = 0; i < warehousesList.length; i++) {
                var wh = warehousesList[i];
                var ruName = wh.DescriptionRu;
                var ukName = wh.Description;

                if (ruName.toUpperCase().indexOf(filter) > -1 || ukName.toUpperCase().indexOf(filter) > -1) {
                    $warehouseSelectorContainer.find('[data-ref=' + wh.Ref + '][data-lang=' + currentLang + ']').show();
                } else {
                    $warehouseSelectorContainer.find('[data-ref=' + wh.Ref + ']').hide();
                }
            }
        });

        $districtSelect.focusin(function () {
            $districtSelectorContainer.show();
        });

        $districtSelect.focusout(function () {
            setTimeout(function () {
                $districtSelectorContainer.hide();
            }, 350);
        });

        $citySelect.focusin(function () {
            $citySelectorContainer.show();
            // if($citySelectorContainer.children().length > 0) {
            //     $citySelectorContainer.show();
            // }
        });

        $citySelect.focusout(function () {
            setTimeout(function () {
                $citySelectorContainer.hide();
            }, 350);
        });

        $warehouseSelect.focusin(function () {
            $warehouseSelectorContainer.show();
        });

        $warehouseSelect.focusout(function () {
            setTimeout(function () {
                $warehouseSelectorContainer.hide();
            }, 350);
        });

        $findWarehouseBtn.click(function () {
            getFilteredResult(getFilter(), warehousesList);
        });

        $('#collapse-content').on('show.bs.collapse', function () {
            $('#collapsable-section-title').text('Закрити розширений пошук');
            $('#collapsable-section-shevron').prop('checked', true);
        });

        $('#collapse-content').on('hide.bs.collapse', function () {
            $('#collapsable-section-title').text('Розширений пошук');
            $('#collapsable-section-shevron').prop('checked', false);
        });

        $clearBtn.click(function () {
            clearFilterInputs();
        });

        getSettlementAreas();
    });
</script>
</body>
</html>
